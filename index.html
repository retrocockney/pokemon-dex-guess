async function newPokemon() {
  document.getElementById("entryText").innerText = "Loading...";
  document.getElementById("result").innerText = "";
  document.getElementById("guessInput").value = "";

  let validEntry = false;

  while (!validEntry) {
    const randomId = Math.floor(Math.random() * 1025) + 1;

    try {
      const response = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${randomId}`);
      const data = await response.json();

      const englishEntries = data.flavor_text_entries.filter(
        entry => entry.language.name === "en"
      );

      if (englishEntries.length === 0) continue; // No English entry, try another Pokémon

      const newestEntry = englishEntries[englishEntries.length - 1];

      currentPokemon = {
        name: data.name.toLowerCase(),
        id: randomId,
        gen: getGeneration(randomId)
      };

      let entryText = newestEntry.flavor_text.replace(/\f/g, " ");

      // Replace Pokémon's own name with underscores
      const nameRegex = new RegExp(currentPokemon.name, "gi");
      const underscores = "_".repeat(currentPokemon.name.length);
      entryText = entryText.replace(nameRegex, underscores);

      document.getElementById("entryText").innerText = entryText;
      validEntry = true;

    } catch (error) {
      console.error("Error loading Pokémon:", error);
      continue; // Try another Pokémon
    }
  }
}
